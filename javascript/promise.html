<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //run=()=>{console.log("rudra");};
        // function Fun(run){
        //     this.message="";
        //     let res="";
        //     run((str)=>{
        //        this.message=str;
        //        res=true;
        //     },(str)=>{
        //        this.message=str;
        //        res=false;
        //     });
        //     this.then=function(){
        //        console.log(this.message);
        //     }
        //     this.catch=function(){
        //         console.log(this.message);
        //     }
        // }
        // let complete=false;
        // let f=new Fun(function(resolve,reject){
        //     if(complete){
        //         resolve("I am succcesful");
        //     }else{
        //         reject("I am failed.");
        //     }
        // });
        // console.log(f.then());
        // console.log(f.catch());
        // console.log(f);



        
        //syntax of promise
        // function prom(complete){
        //     return new Promise((resolve,reject)=>{
        //         console.log("Fetching data,please wait.....");
        //         setTimeout(()=>{
        //             if(complete){
        //                 resolve("I am succcesful");
        //             }else{
        //                 reject("I am failed.");
        //             }
        //         },1000);
        //     })
        // }
        // console.log(prom());
        // prom(false).then((result)=>{
        //    console.log(result);
        // }).catch((error)=>{
        //    console.log(error);
        // });

        // function prom(a,b){
        //     return new Promise((resolve,reject)=>{
        //         console.log("Fetching data,please wait.....");
        //         let c=a/b;
        //         setTimeout(()=>{
        //             if(a,b){// if the value of a and b is set then if condition run otherwise else condition run
        //                 resolve(`Result is: ${c}`);
        //             }else{
        //                 reject("calculation failed");
        //             }
        //         },1000);
        //     })
        // }
        // prom(2,0).then((result)=>{
        //    console.log(result);
        // }).catch((error)=>{
        //    console.log(error);
        // });
        
        // promise.all()
        // function promiseCall(data,message){
        //     return (resolve,reject)=>{
        //         setTimeout(()=>{
        //         console.log(`the ${message} promise`);
        //         resolve(data);
        //         },data*100)
        //     }
        // }
        // let p1=new Promise(promiseCall(10,"first"));
        // let p2=new Promise(promiseCall(20,"second"));
        // let p3=new Promise(promiseCall(30,"third"));
        // Promise.all([p1,p2,p3]).then((result)=>{
        //     console.log(result);
        // }).catch((error)=>{
        //     console.log(error);
        // })

        // passing callback function in our function its have some problem like pyramid of dom and inversion of control,so solve this problem we use 
        // promise in our code 
        const cart=["shoes","pants","kurtas"];
        function createOrder(cart)
        {
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                    let order= [...cart];
                    console.log(order);
                    resolve(order);
                },2000); 
            });
        }
        createOrder(cart)
        .then(result=>{
            return proceedTOPayment(result)
        })
        .then((res)=>{
            document.write(res);
            const btn=document.getElementById('btn');
            btn.addEventListener('click',()=>{
                updateWallet().then((res)=>{
                    document.write(res);
                })
            })
        })
        function proceedTOPayment(a){
            return new Promise((resolve,reject)=>{
                    let data=`your order is ${a} <br>
                    your bill:- <span>230</span>
                    <br> <button id="btn">Proceed To Payment</button> 
                    `;
                    resolve(data);
            })
        }
        function updateWallet(){
            return new Promise((resolve,reject)=>{
               resolve(`Updated Balance is 265/-`); 
            })
        }










    </script>
</body>
</html>